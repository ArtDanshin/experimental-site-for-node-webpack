extends ../../layouts/main

block title
  | Редактирование топика

block content
  .blog-page
    .blog-page__title
      .page-title-block
        .page-title-block__img-block
          img.page-title-block__img(src='/images/polygon-background-blog.png')
        .page-title-block__content
          .page-title-block__title Редактирование статьи
    .blog-page__content
      form.editor.js-editor-form(action='#' method='GET')
        .editor__field
          label.editor__label(for='title') Заголовок
          input.editor__text(type='text' name='title' id='title' value=title)
        .editor__field
          label.editor__label(for='description') Описание
          input.editor__text(type='text' name='description' id='description' value=description)
        .editor__field
          label.editor__label(for='image') Картинка
          input.editor__text(type='text' name='image' id='image' value=image)
        .editor__field
          .editor__label Рубрика
          .editor__select-wrap
            select.editor__select(size='1' name='category' value=category)
              option.editor__option(value='Frontend') Frontend
              option.editor__option(value='Backend') Backend
        .editor__field
          label.editor__label(for='slug') Url заголовок
          input.editor__text(type='text' name='slug' id='slug' value=slug readonly)
        .editor__field
          .editor__label Тело статьи
          .editor__body
            for body_item, index in body
              .editor__body-item
                input.editor__body-type(type='text' name=`body[${index}][type]` value=body_item.type readonly)
                if ['text','code','snippet'].includes(body_item.type)
                  textarea.editor__textarea(name=`body[${index}][content]` rows='5')= body_item.content
                if body_item.type === 'image'
                  .editor__body-field
                    label.editor__label(for=`body${index}-title`) Заголовок
                    input.editor__text(type='text' name=`body[${index}][title]` id=`body${index}-title` value=body_item.title)
                  .editor__body-field
                    label.editor__label(for=`body${index}-author`) Автор
                    input.editor__text(type='text' name=`body[${index}][author]` id=`body${index}-author` value=body_item.author)
                  .editor__body-field
                    label.editor__label(for=`body${index}-url`) Url
                    input.editor__text(type='text' name=`body[${index}][url]` id=`body${index}-url` value=body_item.url)
                if body_item.type === 'gallery'
                  for image, image_index in body_item.images
                    .editor__body-field
                      label.editor__label(for=`body${index}-${image_index}-title`) Заголовок картинки №#{image_index + 1}
                      input.editor__text(type='text' name=`body[${index}][images][${image_index}][title]` id=`body${index}-${image_index}-title` value=image.title)
                    .editor__body-field
                      label.editor__label(for=`body${index}-${image_index}-url`) Url
                      input.editor__text(type='text' name=`body[${index}][images][${image_index}][url]` id=`body${index}-${image_index}-url` value=image.url)
                if body_item.type === 'read_more'
                  for topic, topic_index in body_item.topics
                    .editor__body-field
                      label.editor__label(for=`body${index}-${topic_index}-title`) Заголовок топика №#{topic_index + 1}
                      input.editor__text(type='text' name=`body[${index}][topics][${topic_index}][title]` id=`body${index}-${topic_index}-title` value=topic.title)
                    .editor__body-field
                      label.editor__label(for=`body${index}-${topic_index}-image`) Картинка
                      input.editor__text(type='text' name=`body[${index}][topics][${topic_index}][image]` id=`body${index}-${topic_index}-image` value=topic.image)
                    .editor__body-field
                      label.editor__label(for=`body${index}-${topic_index}-url`) Url
                      input.editor__text(type='text' name=`body[${index}][topics][${topic_index}][url]` id=`body${index}-${topic_index}-url` value=topic.url)
        .editor__field
          .editor__label Тэги
          .editor__tags
            for tag, index in tags
              .editor__tag
                .editor__tag-field
                  label.editor__label(for=`tags${index}-title`) Заголовок
                  input.editor__text(type='text' name=`tags[${index}][title]` id=`tags${index}-title` value=tag.title)
                .editor__tag-field
                  label.editor__label(for=`tags${index}-url`) Url
                  input.editor__text(type='text' name=`tags[${index}][url]` id=`tags${index}-url` value=tag.url readonly)
        .editor__field
          .editor__label Читайте так же
          .editor__read-more
            for read_more_item, index in read_more
              .editor__read-more-item
                .editor__read-more-field
                  label.editor__label(for=`read_more${index}-title`) Заголовок
                  input.editor__text(type='text' name=`read_more[${index}][title]` id=`read_more${index}-title` value=read_more_item.title)
                .editor__read-more-field
                  label.editor__label(for=`read_more${index}-image`) Картинка
                  input.editor__text(type='text' name=`read_more[${index}][image]` id=`read_more${index}-image` value=read_more_item.image)
                .editor__read-more-field
                  label.editor__label(for=`read_more${index}-category`) Рубрика
                  input.editor__text(type='text' name=`read_more[${index}][category]` id=`read_more${index}-category` value=read_more_item.category readonly)
                .editor__read-more-field
                  label.editor__label(for=`read_more${index}-url`) Url
                  input.editor__text(type='text' name=`read_more[${index}][url]` id=`read_more${index}-url` value=read_more_item.url)
        button.editor__submit(type='submit') Отправить